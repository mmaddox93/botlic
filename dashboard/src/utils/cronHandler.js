const a30_0x5dd6=['\x1b[36m=>\x20[','157506listMD','findByIdAndDelete','36762LLreRC','expires_delete_after','catch','error','771028gxGSNW','username','discord_id','11Ezggbd','length','_id','40990QtjCRy','axios','../models/licenseModel','0\x20*/6\x20*\x20*\x20*','data','toLocaleTimeString','1971347rUEpVz','16nkpEMq','0\x201\x20*\x20*\x20*','env','756557kgndAK','Bot\x20','find','log','582574aNzVqN','node-cron','schedule','get'];function a30_0x1ddb(_0xb5bd8f,_0x5547a1){return a30_0x1ddb=function(_0x5dd69c,_0x1ddb83){_0x5dd69c=_0x5dd69c-0x71;let _0xb1c0a9=a30_0x5dd6[_0x5dd69c];return _0xb1c0a9;},a30_0x1ddb(_0xb5bd8f,_0x5547a1);}const a30_0x322446=a30_0x1ddb;(function(_0x54de8e,_0x1e6f1c){const _0x5d4dd4=a30_0x1ddb;while(!![]){try{const _0x1e5bf5=-parseInt(_0x5d4dd4(0x85))+parseInt(_0x5d4dd4(0x8b))*-parseInt(_0x5d4dd4(0x88))+parseInt(_0x5d4dd4(0x73))*-parseInt(_0x5d4dd4(0x81))+-parseInt(_0x5d4dd4(0x7a))+parseInt(_0x5d4dd4(0x76))+parseInt(_0x5d4dd4(0x7f))+parseInt(_0x5d4dd4(0x72));if(_0x1e5bf5===_0x1e6f1c)break;else _0x54de8e['push'](_0x54de8e['shift']());}catch(_0x1f0839){_0x54de8e['push'](_0x54de8e['shift']());}}}(a30_0x5dd6,0x784b6));const cron=require(a30_0x322446(0x7b)),axios=require(a30_0x322446(0x8c)),Licenses=require(a30_0x322446(0x8d)),{expiringHandler}=require('./apiCtrl/expiringHandler'),cronDiscord=async()=>{const _0x112260=a30_0x322446;try{cron[_0x112260(0x7c)](_0x112260(0x74),async()=>{const _0x3f0c45=_0x112260;console['log'](_0x3f0c45(0x7e)+new Date()[_0x3f0c45(0x71)]()+']\x20Executing\x20Discord\x20cron\x20task\x20[This\x20happens\x20every\x2024hours]');const _0x399d51=await Licenses[_0x3f0c45(0x78)](),_0x1e733e=0x3e8;_0x399d51['forEach']((_0x53e70d,_0x45b3f4)=>{setTimeout(async()=>{const _0x52cd65=a30_0x1ddb,_0x5d39e2=_0x53e70d;_0x5d39e2[_0x52cd65(0x87)]&&isNaN(_0x5d39e2[_0x52cd65(0x87)])===![]&&_0x5d39e2[_0x52cd65(0x87)][_0x52cd65(0x89)]>0x11&&await axios[_0x52cd65(0x7d)]('https://discordapp.com/api/users/'+_0x5d39e2['discord_id'],{'headers':{'Authorization':_0x52cd65(0x77)+process[_0x52cd65(0x75)]['DISCORD_BOT_TOKEN']}})['then'](async _0x180508=>{const _0x1e58ac=_0x52cd65;await Licenses['findOneAndUpdate']({'_id':_0x5d39e2[_0x1e58ac(0x8a)]},{'$set':{'discord_username':_0x180508[_0x1e58ac(0x8f)][_0x1e58ac(0x86)]}});})[_0x52cd65(0x83)](_0x411d0a=>{console['log'](_0x411d0a);});},_0x45b3f4*_0x1e733e);});});}catch(_0x46505b){console[_0x112260(0x84)](_0x46505b);}},cronLicenses=async()=>{const _0x2877a9=a30_0x322446;try{cron[_0x2877a9(0x7c)](_0x2877a9(0x8e),async()=>{const _0x1ec058=_0x2877a9;console[_0x1ec058(0x79)](_0x1ec058(0x7e)+new Date()[_0x1ec058(0x71)]()+']\x20Executing\x20licenses\x20cron\x20task\x20[This\x20happens\x20every\x206hours]');const _0x229a01=await Licenses[_0x1ec058(0x78)]();for(let _0x13e6fa=0x0;_0x13e6fa<_0x229a01[_0x1ec058(0x89)];_0x13e6fa++){const _0xdd6617=_0x229a01[_0x13e6fa],_0x489221=await expiringHandler(_0xdd6617);_0x489221&&_0xdd6617[_0x1ec058(0x82)]===!![]&&await Licenses[_0x1ec058(0x80)]({'_id':_0xdd6617[_0x1ec058(0x8a)]});}});}catch(_0x2b64f6){console['error'](_0x2b64f6);}},cronHandler=async()=>{const _0x23fbc5=a30_0x322446;try{cronDiscord(),cronLicenses();}catch(_0x27a995){console[_0x23fbc5(0x84)](_0x27a995);}};module['exports']={'cronHandler':cronHandler};